<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Install Kali Linux on USB with MacOS &#8211; Holger Reinhardt</title>
<meta name="description" content="Simple step-by-step recipe to install Kali Linux with Persistence using MacOS">
<meta name="keywords" content="development, security">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Install Kali Linux on USB with MacOS">
<meta name="twitter:description" content="Simple step-by-step recipe to install Kali Linux with Persistence using MacOS">
<meta name="twitter:site" content="@hlgr360">
<meta name="twitter:creator" content="@hlgr360">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://hlgr360.github.io/blog/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Install Kali Linux on USB with MacOS">
<meta property="og:description" content="Simple step-by-step recipe to install Kali Linux with Persistence using MacOS">
<meta property="og:url" content="https://hlgr360.github.io/blog/blog/installing-kali-macos/">
<meta property="og:site_name" content="Holger Reinhardt">





<link rel="canonical" href="https://hlgr360.github.io/blog/blog/installing-kali-macos/">
<link href="https://hlgr360.github.io/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Holger Reinhardt Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://hlgr360.github.io/blog/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://hlgr360.github.io/blog/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://hlgr360.github.io/blog/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://hlgr360.github.io/blog/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://hlgr360.github.io/blog/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://hlgr360.github.io/blog/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://hlgr360.github.io/blog/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://hlgr360.github.io/blog/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://hlgr360.github.io/blog/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://hlgr360.github.io/blog/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="https://hlgr360.github.io/blog/about/" >About</a></li>
		  
		    
		    <li><a href="https://hlgr360.github.io/blog/blog/" >Blog</a></li>
		  
		    
		    <li><a href="https://hlgr360.github.io/blog/tags/" >Tags</a></li>
		  
		    
		    <li><a href="https://hlgr360.github.io/blog/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="https://hlgr360.github.io/blog/" class="site-logo" rel="home" title="Holger Reinhardt"><img src="https://hlgr360.github.io/blog/images/site-logo.png" width="200" height="200" alt="Holger Reinhardt logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="https://hlgr360.github.io/blog/">Holger Reinhardt</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">I love building products.</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="https://hlgr360.github.io/blog/tags/#development" title="Pages tagged development">development</a></li><li><a href="https://hlgr360.github.io/blog/tags/#security" title="Pages tagged security">security</a></li>
        </ul>
        
          <h1 class="entry-title">Install Kali Linux on USB with MacOS</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="https://hlgr360.github.io/blog/images/hlgr360.jpg" class="bio-photo" alt="Holger Reinhardt bio photo"/>
        
        <span class="author vcard">By <span class="fn">Holger Reinhardt</span></span>
        <span class="entry-date date published"><time datetime="2020-02-25T00:00:00+00:00"><i class="fa fa-calendar-o"></i> February 25, 2020</time></span>
        
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        <span class="social-share-linkedin">
  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://hlgr360.github.io/blog/blog/installing-kali-macos/" title="Share on LinkedIn" itemprop="LinkedIn"><i class="fa fa-linkedin-square"></i> Share</a>
</span>
<span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=development,security&amp;text=Install%20Kali%20Linux%20on%20USB%20with%20MacOS&amp;url=https://hlgr360.github.io/blog/blog/installing-kali-macos/&amp;via=hlgr360" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://hlgr360.github.io/blog/blog/installing-kali-macos/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=https://hlgr360.github.io/blog/blog/installing-kali-macos/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
      </footer>
      <div class="entry-content">
        <p>I spend a couple of hours with my oldest son to setup Kali Linux with persistence on an USB stick using MacOS. For those of you who don’t know <a href="https://www.kali.org">Kali Linux</a>, it is a special linux distro for penetration testing and network security. Well, my son claims he needs it because he is on the hook for a graded presentation in his school about ethical hacking. But I have my doubts if this is his sole motivation - I feel an equal part in this is his desire to (a) hack my laptop and (b) to circumvent the time limits I put on his MacBook. But do I prefer him playing his brains out in ‘Borderlands’ or use the opportunity for him to learn a thing or two.</p>

<p>I still remember - back in the 80’s - the thrill of calling up an unlisted data phone line with my first modem. Back in the day my home was still called East Germany and owning a private data modem (courtesy of my father working in IT research) was somewhat unusual. I guess it was fun (and did not work) except 15 min someone called back but hang up without saying a word. Well, that certainly gave me the creeps. But nothing else happened and in the following years I graduated from a bootlegged and modded version of <a href="https://en.wikipedia.org/wiki/CP/M">CP/M</a> to a East-German version of the <a href="https://de.wikipedia.org/wiki/Spectral_(Heimcomputer)">ZX Spectrum</a>. Oh well, down memory lane ..</p>

<p>Back to Kali Linux. While there are plenty of tutorials how to install a straight Kali Linux on an USB stick, there are none showing how to install Kali Linux on an USB stick with the ability to persist changes. Running Kali Linux in any meaningful way on a bootable USB stick on a MacBook requires the installation of the Broadcom network drivers to be able to connect to the network. Without <a href="https://www.kali.org/docs/usb/kali-linux-live-usb-persistence/">Persistence</a> the Linux distro is pretty limited.</p>

<p>The biggest problems we were facing were to format a limited partition on the USB stick in FAT32. Most tutorials assume that one wants to use the entire space for a single partition - which would not allow space for a secondary partition for persistence. And my trusted friend <a href="https://gparted.org">gparted</a> can not resize the active partition which leaves us between <a href="https://en.wikipedia.org/wiki/Between_a_Rock_and_a_Hard_Place">a rock and a hard place</a>.</p>

<p>So here are the steps on MacOS to get you setup (assumption is that you have access to ‘sudo’ from the command line):</p>

<ul>
  <li>Download the latest ‘kali-linux-2020.1-live-amd64.iso’ from <a href="https://www.kali.org/downloads/">https://www.kali.org/downloads/</a></li>
  <li>Insert your USB stick and open a terminal:
    <ul>
      <li><code class="highlighter-rouge">diskutil list</code> - find the disk id of your USB stick (in the following we assume <code class="highlighter-rouge">disk2</code> for my 64 GB USB stick)</li>
      <li><code class="highlighter-rouge">diskutil eraseDisk FAT32 KALI MBRFormat disk2</code> - creates a bootable FAT32 partition across the entire USB stick</li>
      <li><code class="highlighter-rouge">diskutil list</code> - validate the created partition on the USB stick (for me it would be <code class="highlighter-rouge">disk2s1</code>)</li>
      <li><code class="highlighter-rouge">diskutil splitPartition disk2s1 FAT32 KALI 10%</code> - resizes the partition <code class="highlighter-rouge">disk2s1</code> to 10% of its original size (here = 6.3 GB)</li>
      <li>Remove your USB stick</li>
    </ul>
  </li>
  <li>Download and install <a href="https://unetbootin.github.io">unetbootin</a> to be able to burn the iso to a single partition
    <ul>
      <li>(You will need ‘sudo’ rights for this tool to work)</li>
      <li>Re-insert your USB stick</li>
      <li>Select the downloaded iso image (or pick one of the pre-selected images for a different Linux flavor)</li>
      <li>Select the above created partition on the USB stick</li>
      <li>Burn away</li>
    </ul>
  </li>
</ul>

<p>This creates a bootable USB stick with free space for creating a new partition under Kali Linux. Reboot your MacBook with the Option key pressed to enter the boot menu (see <a href="https://support.apple.com/en-us/HT201255">https://support.apple.com/en-us/HT201255</a>). You should now be able to boot into Kali Linux.</p>

<p>To add persistence open the <code class="highlighter-rouge">gparted</code> under Linux and add a new ‘primary, ext3’ partition on your USB stick. Label it as ‘persistence’. After creating the new partition the only remaining task is the step 4 in <a href="https://www.kali.org/docs/usb/kali-linux-live-usb-persistence/">https://www.kali.org/docs/usb/kali-linux-live-usb-persistence/</a> and you are done (after a reboot). (Note: I had to use vi to create the file as sudo).</p>

<p>Enjoy .. but now I better watch out for my son’s diabolical laugh when he tries to DoS me .. but guess what, it is a challenge I gladly accept.</p>

<p>Hacking you must, but with great power great responsibility comes.</p>

        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'hlgr360'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="https://hlgr360.github.io/blog/blog/digital-leute-2019/" class="btn" title="Summary of 'Digitale Leute' 2019 in Cologne">Previous</a>
      
      
        <a href="https://hlgr360.github.io/blog/blog/installing-docker-and-compose-on-rpi/" class="btn" title="Install docker and docker-compose on RPi">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2020 Holger Reinhardt. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/hlgr360" title="Holger Reinhardt on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="https://linkedin.com/in/hrreinhardt" title="Holger Reinhardt on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	<a href="https://www.slideshare.net/HolgerReinhardt" title="Holger Reinhardt on SlideShare" target="_blank"><i class="fa fa-slideshare fa-2x"></i></a>
	
	
	
	<a href="https://github.com/hlgr360" title="Holger Reinhardt on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="https://hlgr360.github.io/blog/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'https://hlgr360.github.io/blog';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://hlgr360.github.io/blog/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://hlgr360.github.io/blog/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 'https://www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-105145569-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'https://stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>
